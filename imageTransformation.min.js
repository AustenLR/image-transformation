!(function(t) {
  function a() {}
  (a.prototype.gray = function(t) {
    var a = document.createElement('canvas'),
      e = a.getContext('2d'),
      h = t.width,
      i = t.height;
    (a.width = h), (a.height = i), e.drawImage(t, 0, 0);
    for (var r = e.getImageData(0, 0, h, i), d = 0; d < r.height; d++)
      for (var n = 0; n < r.width; n++) {
        var g = 4 * d * r.width + 4 * n,
          o = (r.data[g] + r.data[g + 1] + r.data[g + 2]) / 3;
        (r.data[g] = o), (r.data[g + 1] = o), (r.data[g + 2] = o);
      }
    e.putImageData(r, 0, 0, 0, 0, r.width, r.height);
    var w = new Image();
    return (w.src = a.toDataURL()), w;
  }), (a.prototype.rotate = function(t, a) {
    var e = document.createElement('canvas'),
      h = e.getContext('2d'),
      i = 0,
      r = 0,
      d = t.width,
      n = t.height;
    90 === a
      ? ((d = t.height), (n = t.width), (r = -1 * t.height))
      : 180 === a
        ? ((i = -1 * t.width), (r = -1 * t.height))
        : 270 === a &&
          ((d = t.height), (n = t.width), (i = -1 * t.width)), e.setAttribute(
      'width',
      d
    ), e.setAttribute('height', n), h.rotate(a * Math.PI / 180), h.drawImage(
      t,
      i,
      r
    );
    var g = new Image();
    return (g.src = e.toDataURL()), g;
  }), (t.MyImageTransformation = new a());
})(window);
